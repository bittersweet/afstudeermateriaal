\chapter{Implementatie}

In het adviesrapport zijn een vijftal adviezen opgesteld, wat volgt is uitleg over hoe deze zijn uitgewerkt bij Fullmoon.

\section{SCM Systeem}

\subsection{Keuze}

Voor Fullmoon is de keuze van het {\sc scm} gevallen op Subversion. Één van de uitgangspunten van het project was dat de nieuwe situatie te gebruiken moest zijn voor alle werknemers. Het moest dus een niet te ingrijpende verandering zijn. Omdat het een diverse groep is van designers, programmeurs en projectmanagers, waarbij niet iedereen zich even op het gemak voelt met de commandline, is er gekozen voor Subversion. Het grote aanbod aan (grafische) tools gaf hierbij de doorslag.

\subsection{Uitwerking}

Bij Fullmoon zijn presentaties en uitleg gegeven over het werken met Subversion in het programma SmartSVN. Maar de werknemers zijn in principe vrij om het programma te gebruiken dat ze willen.

Er is een server in gebruik genomen om de Subversion repository te hosten. Hier wordt ook door middel van \emph{post-commit hooks} automatisch elk project geupdate. Zo is er een centrale plek waar iedereen de laatste versie van het project kan bekijken om deze eventueel te testen. Ook is dit handig om snel een website te kunnen bekijken zonder alles binnen te hoeven halen.

\subsection{Koppeling}

Naast het feit dat elke werknemer nu werkt met Subversion komt het ook nog in andere gebieden terug. Zo worden verschillende omgevingen geupdate met Subversion via Capistrano en is er een centrale website ingericht om de activiteit van projecten te kunnen bekijken. Dit is na te lezen in respectievelijk sectie 2.2 en 2.4.

\section{Ontwikkelstraat}

In het begin maakte Fullmoon gebruik van twee verschillende omgevingen, één interne webserver waar op ontwikkeld werd en een externe server waar alle sites op draaiden. Dat aantal is vergroot naar vier door een acceptatie- en testomgeving toe te voegen. De huidige situatie is dus in de vorm van een OTAP-straat\footnote{ontwikkel, test, acceptatie en productie}. Er wordt niet voor elk project gebruik gemaakt van de acceptatie server maar in principe gaat nieuwe code 3 omgevingen door voor het online komt te staan.

Het werken op de interne webserver is ook veranderd, door middel van Subversion werkt elke medewerker nu op zijn eigen computer. Zo kan iedereen individueel werken aan projecten zonder dat ze elkaar hierbij in de weg zitten. Door middel van Subversion zijn de wijzigingen van anderen uiteraard nog wel binnen te halen.

Zoals vermeld in 2.1.2 wordt de testomgeving automatisch geupdate in navolging van een commit. Hier kan een project intern getest worden door alle werknemers.

De acceptatieomgeving is ook een interne webserver die bereikbaar is voor aan de buitenwereld door middel van een gebruikersnaam en wachtwoord. Door middel van Subversion wordt een bepaalde versie van het project een \emph{tag} gegeven, zodat de acceptatieomgeving de website kan tonen op basis van deze tag. Zo kan er verder gewerkt worden aan het project terwijl de klant wel een goede versie te zien krijgt om wijzigingen goed te keuren.

\section{Backup}



\section{Ticketsysteem}

Na vele systemen uitgeprobeerd te hebben is de keuze gevallen op Redmine. Deze sloot nauw aan bij de wensen van Fullmoon. Zo moest er een centrale plek komen waar de status van projecten te bekijken was, issues én wijzigigen in de code. Eigenlijk doe je Redmine er te kort mee als je het alleen een ticketsysteem noemt, het biedt nog veel meer.

Fullmoon gebruikt het om het moment alleen intern, ze leveren sinds kort wel support voor de klant met behulp van een ticketsysteem maar dat staat los van Redmine. Mail naar een support adres wordt opgevangen door dit systeem waarna klanten verdere correspondentie en updates ook via de website kunnen raadplegen. In de toekomst zal nog geëvalueerd worden of die scheiding gunstig is want Redmine kan ook voor deze doeleinden worden gebruikt.

\section{Automatisch deployen}

Om code naar verschillende omgevingen toe te sturen wordt gebruik gemaakt van Capistrano in combinatie met de in het advies genoemde multistage plugin. Zo kan met één enkel commando code vanuit de Subversion repository naar de gewenste omgeving gestuurd worden.

Voordat hier gebruik gemaak van werd liep het updaten van websites af en toe in de soep. Als meerdere mensen lang aan iets gewerkt hadden was het niet meer goed duidelijk wat nou precies veranderd was en wat er nodig was om up te loaden. Zo kwam het voor dat sommige functionaliteit niet goed werkte omdat er een bestand mistte, of dat het verkeerde bestand was geupload. Nu worden sites zonder gevaar en moeite geupdate, en is het een snel klusje geworden.

In samenwerking met Subversion bied Capistrano ook de mogelijkheid om snel na te gaan welke versie van een project online staat. Voordat gebruik werd gemaakt van Subversion was het giswerk wat er allemaal online stond, nu kan je direct zien vanaf welke revisie een website draait.
